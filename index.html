<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <title>Neural Networks and Randomness</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-3cf8b5ad46747fd920cc0ab3b00529b5.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="index_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="index_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="index_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section class="slide level2">


<div style="display: flex; flex-direction: row;">
<div style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 0 1.5em; max-width: 30vw">
    <img src="imgs/tree-stump.jpg">
    <span style="font-style: italic; font-size: 0.75rem;">A redwood tree stump, Janith Wanniarachchi 2025</span>
  </div>
  

  <div>

  <h2> Winning the Neural Network Lottery by Chance </h2>
  <span style="display: flex; font-style: italic; font-size: 1.25rem"> How I spent an year trying to fit neural networks with the worse luck imaginable </span>

  <br>

  <span class="accent-color" style="font-family: 'Barlow', sans-serif; font-weight: bold"> Janith Wanniarachchi </span>
  
  <br>
  
  <span style="font-style: italic; font-size: 1.5rem; display: block;"> janith.wanniarachchi@monash.edu </span>

  <hr style="width: 40%; opacity: 0.2; margin-left: 0">

  <span style="font-size: 1.5rem; display: inline-block"> Supervised by Prof. Dianne Cook, Dr. Kate Saunders, Dr. Patricia Menendez, Dr. Thiyanga Talagala </span>

<br>

</div>

</div>

</section>
<section id="lets-be-honest-here" class="slide level2 center">
<h2>Let’s be honest here</h2>
<div class="fragment">
<p>Building a good model is <em>hard</em></p>
</div>
<div class="fragment">
<p>Explaining how a good model works is even <strong>harder</strong></p>
<aside class="notes">
<p>All right I’ll be real with you, i have a hot take that everyone knows but no one wanted to address. Let’s be honest here, building models are hard, we spend enough years in grad school struggling making those but theres a bigger problem here, explaining these models is even harder.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="section" class="slide level2 center what-if">
<h2></h2>
<div class="fragment">
<p><img src="imgs/black_box_model-2.png" style="width: 20%"> <br> <span style="font-style: italic; font-size: 1.2rem"> Exhibit A: The good model </span></p>
</div>
<div class="fragment">
<div>
<strong>What if</strong> you could <br> poke around and find out <br> how this model works?
</div>
</div>
<div class="fragment">
<p><strong>Introducing</strong></p>
<div class="accent-color">
<strong>Explainable AI (XAI) methods!</strong>
</div>
<aside class="notes">
<p>I bring to the court, exhibit A, the black box model which is performing good at the moment and smiling proudly for performing well, (must be nice to be happy like that) but we don’t know how it is making it’s decisions. What if we could poke around and find out how this model works? Well there’s a new field that’s being growing in pushing the boundaries of explaining black box models called explainable AI or XAI</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="xai-has-a-lot-of-facets" class="slide level2">
<h2>XAI has a lot of facets</h2>
<p>XAI can help you look at</p>
<div class="columns">
<div class="column" style="width:50%;">
<p style="text-align:center">
<img src="imgs/global_methods_2.png" style="width:90%">
</p>
<p>How the model reacts to different features overall using <span class="accent-color"> Global Interpretability Methods </span></p>
</div><div class="column" style="width:50%;">
<p style="text-align:center">
<img src="imgs/local_methods_2.png" style="width:90%">
</p>
<p>How the model gives a prediction to one single instance using <span class="accent-color">Local Interpretability Methods </span></p>
</div></div>
<aside class="notes">
<p>Much like us humans, XAI comes in different varieties, and the two main ones are global and local interpretability methods, since I’ll be talking about bushfires, let’s assume that we have this amazing model that can predict the probability of a bushfire given a future date and location and it’s scarily good. Global methods will tell us how let’s say the temperature affects the chances of bushfire, while local methods will be able to tell us which weather conditions it used to give the prediction for a specific location and time.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="explaining-one-prediction" class="slide level2">
<h2>Explaining one prediction</h2>
<p>There are several key <span class="accent-color"> local interpretability methods </span> that are related to each other in how they approach the problem</p>
<ol type="1">
<li>LIME (Local Interpretable Model agnostic Explanations)</li>
<li>SHAP (SHapley Additive exPlanations)</li>
<li>Anchors</li>
<li>Counterfactuals</li>
</ol>
<aside class="notes">
<p>From these two methods generally understanding on a local scale is more informative and there are several methods that are connected together called lime, counterfactuals and anchors.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="but" class="slide level2">
<h2>But,</h2>
<div class="fragment fade-in">
<h3 id="what-if-instead-of-looking-at-the-numerical-values-of-these-xai-methods"><strong>What if</strong> instead of looking at the numerical values of these XAI methods</h3>
</div>
<p><br><br></p>
<div class="fragment fade-in">
<h3 id="we-represented-the-numbers-as-a-visual-object-within-the-data-itself.">we represented the numbers as a visual object within the data itself.</h3>
</div>
</section>
<section id="lime" class="slide level2">
<h2>LIME</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>LIME works by trying to find the simplest model within the local neighbourhood that is as similar as possible to the original black box model. Therefore, for a given observation, the LIME explanations are the model coefficients of the interpretable model (e.g.&nbsp;a Generalized Linear Model)</p>
</div><div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-2dim-lime" class="quarto-float quarto-figure quarto-figure-center" data-fig-align="center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-2dim-lime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-2dim-lime-1.png" class="quarto-figure quarto-figure-center" style="width:4in;height:4in">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2dim-lime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Geometric representation of LIME in two dimensions
</figcaption>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="shap" class="slide level2">
<h2>SHAP</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Similar to LIME, SHAP builds a linear model around the given observation with the features being mapped to a binary vector indicating whether the feature is included in the model or not.</p>
<p>SHAP is based on Shapley values which distributes a reward among cooperative players in a game. In this context the players are the features of the model and the reward is the prediction.</p>
<p>The coefficients of the model are then given by Shapley values and can be considered as the contribution that the given feature has towards the prediction.</p>
</div><div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-2dim-shap" class="quarto-float quarto-figure quarto-figure-center" data-fig-align="center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-2dim-shap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-2dim-shap-1.png" class="quarto-figure quarto-figure-center" style="width:4in;height:4in">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2dim-shap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Geometric representation of SHAP in two dimensions.
</figcaption>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="counterfactuals" class="slide level2">
<h2>Counterfactuals</h2>
<div class="columns">
<div class="column">
<p>A counterfactual explanation <span class="math inline">\(\boldsymbol{x}_i^{(c)}\)</span> for a given <span class="math inline">\(\boldsymbol{x}_i\)</span> and a desired outcome value <span class="math inline">\(y_{i}^{(\exp)}\)</span>, is defined as an observation satisfying the following conditions:</p>
<ol type="1">
<li><span class="math inline">\(y_{i}^{(\exp)} \approx f(\boldsymbol{x}_i^{(c)})\)</span>.</li>
<li><span class="math inline">\(\boldsymbol{x}_i\)</span> and <span class="math inline">\(\boldsymbol{x}_i^{(c)}\)</span> are close to each other in the data space.</li>
<li><span class="math inline">\(\boldsymbol{x}_i^{(c)}\)</span> differs from <span class="math inline">\(\boldsymbol{x}_i\)</span> only in a few components.</li>
<li><span class="math inline">\(\boldsymbol{x}_i^{(c)}\)</span> is a plausible data point according to the distribution of each dimension.</li>
</ol>
</div><div class="column">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-2dim-cfacts" class="quarto-float quarto-figure quarto-figure-center" data-fig-align="center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-2dim-cfacts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-2dim-cfacts-1.png" class="quarto-figure quarto-figure-center" style="width:4in;height:4in">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2dim-cfacts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Geometric representation of Counterfactuals in two dimensions. Hollow diamond shapes represent the counterfactual observations for the observations in solid circles connected through a line.
</figcaption>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="anchors" class="slide level2">
<h2>Anchors</h2>
<div class="columns">
<div class="column">
<p>Anchors are defined as a rule or a set of predicates that satisfy the given instance and is a sufficient condition for <span class="math inline">\(f(x_i)\)</span> with high probability. A predicate is a logical condition that an observation may or may not satisfy.</p>
<p>Finding an anchor for a given instance can be defined as the solution to the following optimization problem,</p>
<p><span class="math display">\[
\max_{\mathcal{A} \text{ s.t. } \text{Pr}(\text{Prec}(\mathcal{A}) \ge \tau) \ge 1 - \delta} \text{Coverage}(\mathcal{A})
\]</span></p>
<p>The target would then be to maximize the coverage while ensuring that the precision is above a tolerance level.</p>
</div><div class="column">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-2dim-anchors" class="quarto-float quarto-figure quarto-figure-center" data-fig-align="center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-2dim-anchors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="index_files/figure-revealjs/fig-2dim-anchors-1.png" class="quarto-figure quarto-figure-center" style="width:4in;height:4in">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2dim-anchors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: Geometric representation of Anchors in two dimensions
</figcaption>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="kultarr-r-package" class="slide level2">
<h2>Kultarr R package</h2>
<div style="display:flex; flex-direction: column; justify-content: center; align-items:center"> 
  <img src="imgs/kultarr.svg" style="width: 50%">
</div>
<div class="columns">
<div class="column">
<p>The existing implementations of Anchors were quite hard to work with and were quite slow as it was using an existing Java package.</p>
</div><div class="column">
<p>Kultarr is an R package that aims to provide an implementation of Anchors using a simpler algorithm and a complete set of orthogonal predicates.</p>
<p>Try the package out from <a href="https:://github.com/janithwanni/kultarr">https://github.com/janithwanni/kultarr</a></p>
</div></div>
</section>
<section id="in-two-dimensions" class="slide level2">
<h2>In two dimensions,</h2>
<p><br></p>
<div style="display:flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; font-size: 2.5rem; font-weight: bold; gap: 2rem">
  <div>
    <span class="fragment fade-right" data-fragment-index="1">
      <span class="accent-color">LIME</span> can be seen as
    </span>
    <span class="fragment fade-left" data-fragment-index="2"> 
      <span class="accent-light-color"> regression lines</span>
    </span>
  </div>
  <div>
    <span class="fragment fade-right" data-fragment-index="4">
      <span class="accent-color"> SHAP </span> can be seen as
    </span>
    <span class="fragment fade-left" data-fragment-index="5"> 
      <span class="accent-light-color"> force vectors</span>
    </span>
  </div>
  <div>
    <span class="fragment fade-right" data-fragment-index="6">
      <span class="accent-color"> Counterfactuals </span> can be seen as
    </span>
    <span class="fragment fade-left" data-fragment-index="7"> 
      <span class="accent-light-color"> connecting lines</span>
    </span>
  </div>
  <div>
    <span class="fragment fade-right" data-fragment-index="8">
      <span class="accent-color"> Anchors </span> can be seen as
    </span>
    <span class="fragment fade-left" data-fragment-index="9"> 
      <span class="accent-light-color"> boxes </span>
    </span>
  </div>
</div>
</section>
<section id="extending-detourr" class="slide level2">
<h2>Extending detourr</h2>
<div class="columns">
<div class="column">
<p><img data-src="imgs/detourr_funcs.gif"></p>
</div><div class="column">
<ul>
<li>Clicking on points in the detourr widget now returns the identifier.</li>
<li>A proxy was created to communicate with an existing rendered detourr widget.</li>
<li>Added support for adding points and edges connecting new points.</li>
<li>Options to customize aesthetics of points and edges.</li>
<li>Existing points can be highlighted or enlarged.</li>
</ul>
</div></div>
</section>
<section id="xai-explorer" class="slide level2 center">
<h2>XAI explorer</h2>
<div style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
<p><img src="imgs/app_demo_2.gif"></p>
</div>
</section>
<section id="rosella-r-package" class="slide level2">
<h2>Rosella R package</h2>
<div style="display:flex; flex-direction: column; justify-content: center; align-items:center"> 
  <img src="imgs/rosella.svg" style="width: 50%">
</div>
<div class="columns">
<div class="column">
<p>The current status of the XAI explorer was bundled into an R package to ensure that anyone with compute can run the Shiny app on their own servers.</p>
</div><div class="column">
<p>rosella is an R package that allows you to run the XAI explorer locally on your laptop. It’s still under development in terms of allowing users to generate XAI explanations for their own datasets.</p>
<p>Try the package out from <a href="https:://github.com/janithwanni/rosella">https://github.com/janithwanni/rosella</a></p>
</div></div>
</section>
<section>
<section id="lets-join-the-cult" class="title-slide slide level1 center">
<h1>Let’s join the cult</h1>

</section>
<section id="being-agnostic-is-fun-and-all-but" class="slide level2">
<h2>Being agnostic is fun and all, but …</h2>
<p>How long has it been since you last spoke to an LLM? How many of you in this room are chatting with an LLM right now?</p>
<ul>
<li class="fragment">Deep Learning and Large Language Models have taken over most of the asepcts of our life.</li>
<li class="fragment">Model Agnostic XAI methods can poke and prod at the model but,</li>
<li class="fragment">Unless we crack open the model wide we won’t be able to tell what’s happening in these models.</li>
</ul>
</section></section>
<section>
<section id="so-lets-fit-a-neural-network" class="title-slide slide level1 center">
<h1>So let’s fit a neural network</h1>

</section>
<section id="simple-stuff-first" class="slide level2">
<h2>Simple stuff first,</h2>
<p>Let’s take a look at the following dataset</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">ggplot</span>() <span class="co">#TODO: Fill with the dataset plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-3-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section></section>
<section>
<section id="quick-refresher-on-how-neural-networks-work" class="title-slide slide level1 center">
<h1>Quick refresher on how neural networks work</h1>

</section>
<section id="all-right-for-our-dataset" class="slide level2">
<h2>All right for our dataset,</h2>
<p>Let’s get a quick poll on what our hyperparameters should be</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>Known and fixed hyperparameters (for the plot)</p>
<ul>
<li>Number of epochs: 100</li>
<li>Batch size: 71</li>
<li>Loss function: Binary Cross Entropy loss</li>
<li>Optimizer: Adam</li>
<li>Training set size: 5,000</li>
<li>Testing set size: 5,000</li>
</ul>
</div><div class="column" style="width:50%;">
<p>What shall we pick as the number of neurons in a single layer?</p>
<ul>
<li>4</li>
<li>5</li>
<li>8</li>
<li>10</li>
</ul>
<p>Join the live poll below to share your votes</p>
</div></div>
</section>
<section id="so-based-on-your-results" class="slide level2">
<h2>So based on your results,</h2>
<p>This is the result for a single layer neural network with,</p>
<div class="columns">
<div class="column">
<p>Use simple javascript to pick up the plot with the lowest f1 and accuracy and show them here</p>
</div><div class="column">

</div><div class="column">

</div><div class="column">

</div></div>
<div class="fragment fade-in">
<p>Are we sure though?</p>
<button> Check again </button>
</div>
</section></section>
<section>
<section id="any-guesses-on-what-exactly-happened-here" class="title-slide slide level1 center">
<h1>Any guesses on what exactly happened here?</h1>

</section>
<section id="for-an-entire-year-i-used-the-wrong-seed" class="slide level2">
<h2>For an entire year I used the wrong seed</h2>
<p>The random seed has an effect on how neural networks are being built</p>
<p>It can be due to primarily the initial weights used in the training, which has been used heavily in,</p>
<ul>
<li>The lotter ticket hypothesis</li>
<li>Meta Learning</li>
<li>And many more cases,</li>
</ul>
</section></section>
<section>
<section id="cool-story-bro-so-what" class="title-slide slide level1 center">
<h1>Cool story bro, so what?</h1>

</section>
<section id="smaller-models-for-small-datasets" class="slide level2">
<h2>Smaller models for small datasets</h2>
<p>I could have chucked a 20 neuron two hidden layer neural network with 500 epochs,</p>
<p>But why?</p>
<p>Look at this dataset</p>
<p>Does this decision boundary need more parameters than there are bends in the decision boundary?</p>
</section>
<section id="fixing-things-before-it-starts" class="slide level2">
<h2>Fixing things before it starts</h2>
<p>In a majority of deep learning education material very rarely is the effect of the random seed discussed.</p>
<p>That is why I built a tool for data science educators to educate students by trying out multiple model variants and seeing the difference</p>
<p>And today you get to try that out as well</p>
<p>As the seocnd batch of students to experience the app</p>
</section>
<section id="introducing" class="slide level2">
<h2>Introducing <name to="" be="" decided=""></name></h2>
<p>Visit <a href="http://random-nn-playground.janith.com">random-nn-playground.janith.com</a></p>
</section>
<section id="the-architecture-behind-the-app" class="slide level2">
<h2>The architecture behind the app</h2>
<div class="cell" data-reveal="true" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-architecture" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-architecture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-architecture">graph TB
    
    %% Main Application Layer
    subgraph "Main Application (R/Shiny)"
        %% Frontend Layer
        subgraph "Frontend Layer"
            UI[Fomantic UI Components]
            Squiggler[Squiggler Tool&lt;br/&gt;Svelte → JS/CSS]
        end

        Shiny[Shiny Web Framework&lt;br/&gt;Rhino for&lt;br/&gt;Codebase Management]
        
        %% Visualization Components
        subgraph "Visualization Libraries"
            GGPlot[ggplot2&lt;br/&gt;Static Plots]
            Beeswarm[ggbeeswarm&lt;br/&gt;Plot Geometry]
            Ggiraph[ggiraph&lt;br/&gt;Interactivity]
            Gifski[gifski&lt;br/&gt;GIF Animations&lt;br/&gt;Rust-powered]
        end

        %% Backend Processing Layer
        subgraph "Backend Processing"
            Python[Python Background Tasks&lt;br/&gt;Model Fitting&lt;br/&gt;with PyTorch&lt;br/&gt;]
            Parquet[Parquet Files&lt;br/&gt;for Data Transfer]
        end

    end
    
    
    %% Data Layer
    %% subgraph "Data Storage"
    %% end
    
    %% Connections
    UI --&gt; Shiny
    Squiggler --&gt; Shiny
    
    %% Visualization connections
    Shiny --&gt; GGPlot
    Shiny --&gt; Beeswarm
    Shiny --&gt; Ggiraph
    Shiny --&gt; Gifski
    
    %% Interactive plot creation
    Beeswarm --&gt; Ggiraph
    
    %% Backend connections
    Shiny -.-&gt;|Background Task| Python
    Python --&gt; Parquet
    Shiny --&gt; Parquet
    
    %% Styling
    classDef frontend fill:#e1f5fe
    classDef rshiny fill:#f3e5f5
    classDef backend fill:#fff3e0
    classDef data fill:#e8f5e8
    
    class UI,Squiggler frontend
    class Shiny,GGPlot,Beeswarm,Ggiraph,Gifski rshiny
    class Python,PyTorch backend
    class Parquet data
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-architecture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: The architecture of the pedagogical tool
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-methodology-behind-the-app" class="slide level2">
<h2>The methodology behind the app</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    A["Start: Input Decision Boundary Function f&lt;br/&gt;Seed Range [1, 99999]&lt;br/&gt;Neuron Sizes N"] --&gt; B[Phase 1: Dataset Generation]
    
    B --&gt; C[Set Consistent Seed for Reproducibility]
    C --&gt; D["Generate 10,000 Samples&lt;br/&gt;Uniformly from [-10, 10] × [-10, 10]"]
    D --&gt; E["For Each Point (x₁, x₂)"]
    E --&gt; F["Assign Label y = f(x₁, x₂)&lt;br/&gt;Above/Below Boundary"]
    F --&gt; G[Create Training and Testing Datasets]
    
    G --&gt; H[Phase 2: Parallel Training Process]
    
    H --&gt; I[For Each Neuron Size n ∈ N]
    I --&gt; J["Select Random Seed s ∈ [1, 99999]"]
    J --&gt; K["For Each Seed-Neuron Combination (s, n)"]
    
    K --&gt; L["Initialize Single-Layer Neural Network:&lt;br/&gt;• Input: 2 nodes&lt;br/&gt;• Hidden: n neurons (ReLU)&lt;br/&gt;• Output: 1 node (Sigmoid)"]
    
    L --&gt; M[Set Network Weights Using Seed s]
    M --&gt; N["Configure Training Parameters:&lt;br/&gt;• Batch Size: b = ⌊√|D|⌋ = 71&lt;br/&gt;• Adam Optimizer: lr=0.01&lt;br/&gt;• Loss: Binary Cross Entropy"]
    
    N --&gt; O[Training Loop: 500 Epochs]
    O --&gt; P[Shuffle Training Data Using Seed s]
    P --&gt; Q[For Each Batch B of Size b]
    
    Q --&gt; R["Forward Pass:&lt;br/&gt;ŷ = σ(W₂ · ReLU(W₁ · X + b₁) + b₂)"]
    R --&gt; S[Compute BCE Loss]
    S --&gt; T[Backward Pass &amp; Adam Update]
    
    T --&gt; U{More Batches?}
    U --&gt;|Yes| Q
    U --&gt;|No| V{More Epochs?}
    V --&gt;|Yes| P
    V --&gt;|No| W{More Seed-Neuron&lt;br/&gt;Combinations?}
    
    W --&gt;|Yes| K
    W --&gt;|No| X{More Neuron&lt;br/&gt;Sizes?}
    X --&gt;|Yes| I
    X --&gt;|No| Y[Phase 3: Model Evaluation]
    
    Y --&gt; Z[For Each Trained Model M]
    Z --&gt; AA[Evaluate on Testing Dataset:&lt;br/&gt;• Compute Predictions ŷₜₑₛₜ&lt;br/&gt;• Calculate F1-Score&lt;br/&gt;• Calculate Accuracy]
    
    AA --&gt; BB[Create Decision Boundary Visualization:&lt;br/&gt;• Generate 100×100 Grid&lt;br/&gt;• Apply Model to Grid&lt;br/&gt;• Store Boundary Predictions]
    
    BB --&gt; CC{More Models?}
    CC --&gt;|Yes| Z
    CC --&gt;|No| DD[Return: Models, Metrics,&lt;br/&gt;Decision Boundaries]
    
    DD --&gt; EE[End]
    
    style B fill:#e1f5fe
    style H fill:#f3e5f5
    style Y fill:#e8f5e8
    style A fill:#fff3e0
    style EE fill:#fff3e0
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section></section>
<section>
<section id="where-to-from-here" class="title-slide slide level1 center">
<h1>Where to from here?</h1>

</section>
<section id="attention-is-all-you-need-but-did-we-need-that-much-attention" class="slide level2 smaller">
<h2>Attention is all you need, but did we need that much attention?</h2>
<ul>
<li>Modern Transformers have billions of parameters, holding vast world knowledge.
<ul>
<li><strong>Motivating Question:</strong> Can we study simpler models to understand the fundamental computational circuits underlying reasoning and knowledge representation?</li>
</ul></li>
<li>Recent research suggests even small models can develop meaningful “circuits, interconnected features collaborating to perform specific tasks.</li>
<li><span class="citation" data-cites="nanda2023progress">[@nanda2023progress]</span> demonstrated algorithmic circuits emerging in a 1-layer transformer trained on modular arithmetic.
<ul>
<li><span class="citation" data-cites="elhage2022toy">[@elhage2022toy]</span> showed how Sparse Autoencoders (SAEs) disentangle overlapping concepts, leading to more interpretable representations.</li>
</ul></li>
<li>We will study a 1-layer transformer trained on modular arithmetic.
<ul>
<li><strong>Key Innovation:</strong> Integrating a Sparse Autoencoder (SAE) <em>after</em> the multi-layer perceptron output.</li>
<li>SAE Reconstruction: Dense input reconstructed using sparse latent features.</li>
<li><strong>Gap to Fill:</strong> Lack of simultaneous visualization of training dynamics <em>and</em> circuit structure – particularly crucial in small, interpretable models.</li>
<li>Create an interactive visualization of emerging transformer circuits using SAEs.</li>
<li>Goal: Understand how even simple transformers develop reasoning structures.</li>
<li>Step towards understanding larger, more complex models.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="timeline" class="title-slide slide level1 center">
<h1>Timeline</h1>

<img data-src="index_files/figure-revealjs/fig-timeline-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%" id="fig-timeline"><p class="caption">
Figure&nbsp;6: Project timeline for the PhD
</p></section>
<section id="thank-you" class="slide level2 center">
<h2>Thank you!</h2>
<p>Have any suggestions or ideas? <i class="fa-solid fa-comment" aria-label="comment"></i></p>
<div class="card-container">
  <div class="card">
    <div class="card-text">
      <div class="portada">
        <img src="imgs/banner-image-hiroshige.png">
        <span style="font-size: 0.7rem; font-style: italic;"> The colour palette for these slides are inspired by the painting "Sailing Boats Returning to Yabase" by Utagawa Hiroshige, 1835 (MetBrewer R package) </span>
      </div>
      <div class="title-total"> 
        <div class="img-container">
          <div class="img-avatar">
            <img src="imgs/profile_picture.jpeg ">
          </div>
        </div>
        <h4 class="accent-color">Janith Wanniarachchi</h4>
        <div class="desc">
          <div>
            <span> <i class="fa-regular fa-envelope fa-sm"></i> </span> 
            <span class="contact-detail"> janith.wanniarachchi@monash.edu </span>
          </div>
          <div>
            <span> <i class="fa-brands fa-github-alt fa-sm"></i> </span>
            <span class="contact-detail"> @janithwanni </span>
          </div>
          <div>
            <span> <i class="fa-brands fa-linkedin"></i></span>
            <span class="contact-detail"> janith-wanniarachchi </span>
          </div>
          <div>
            <span> <i class="fa-solid fa-globe fa-sm"></i> </span>
            <span class="contact-detail"> janithwanni.netlify.app </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="imgs/slide-url-qr.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>https://janithwanni-phd-2nd-year.netlify.app/</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'multiplex': {"secret":null,"id":"a483831ac3bd957b","url":"https://reveal-multiplex.glitch.me/"},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>